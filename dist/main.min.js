"use strict";var CONFIG={PLAYER_SPEED:6,FIRE_COOLDOWN:200,BULLET_SPEED:8,SHAPE_MIN_SPEED:2,SHAPE_MAX_SPEED:4,SHAPE_SIZE:30,SPAWN_BASE:800,SPAWN_MIN:300},canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d");function resizeCanvas(){canvas.width=window.innerWidth,canvas.height=window.innerHeight}window.addEventListener("resize",resizeCanvas),resizeCanvas();var GAME_STATE={HOME:"HOME",PLAYING:"PLAYING",PAUSED:"PAUSED"},currentState=GAME_STATE.HOME,homeUI=document.getElementById("homeUI"),startBtn=document.getElementById("startBtn"),scoreboard=document.getElementById("scoreboard"),highScore=Number(localStorage.getItem("highScore"))||0;scoreboard.textContent="HIGH SCORE: ".concat(highScore),startBtn.onclick=function(){currentState=GAME_STATE.PLAYING,homeUI.style.display="none",startGame()};var lastTime=0;function gameLoop(e){var t=Math.min(e-lastTime,50);lastTime=e,ctx.clearRect(0,0,canvas.width,canvas.height),currentState===GAME_STATE.PLAYING&&update(t),render(),requestAnimationFrame(gameLoop)}requestAnimationFrame(gameLoop);var player={width:40,height:20,x:0,y:0,fireCooldown:0};function resetPlayer(){player.x=canvas.width/2-player.width/2,player.y=canvas.height-player.height-20}var moveLeft=!1,moveRight=!1,spaceHeld=!1,bullets=[];function shoot(){0<player.fireCooldown||(bullets.push({x:player.x+player.width/2-2,y:player.y,width:4,height:10,speed:CONFIG.BULLET_SPEED}),player.fireCooldown=CONFIG.FIRE_COOLDOWN)}var shapes=[],spawnTimer=0;function spawnShape(){shapes.push({x:Math.random()*(canvas.width-CONFIG.SHAPE_SIZE),y:-CONFIG.SHAPE_SIZE,size:CONFIG.SHAPE_SIZE,speed:CONFIG.SHAPE_MIN_SPEED+Math.random()*(CONFIG.SHAPE_MAX_SPEED-CONFIG.SHAPE_MIN_SPEED)})}var score=0;function startGame(){spawnTimer=score=0,bullets.length=0,shapes.length=0,spaceHeld=moveRight=moveLeft=!1,resetPlayer()}function endGame(){currentState=GAME_STATE.HOME,homeUI.style.display="flex",highScore<score&&(highScore=score,localStorage.setItem("highScore",highScore)),scoreboard.textContent="HIGH SCORE: ".concat(highScore)}function update(t){player.fireCooldown-=t,player.fireCooldown<0&&(player.fireCooldown=0),moveLeft&&(player.x-=CONFIG.PLAYER_SPEED),moveRight&&(player.x+=CONFIG.PLAYER_SPEED),player.x<0&&(player.x=0),player.x+player.width>canvas.width&&(player.x=canvas.width-player.width),spawnTimer+=t;var e=Math.max(CONFIG.SPAWN_MIN,CONFIG.SPAWN_BASE-10*score);e<=spawnTimer&&(spawnShape(),spawnTimer-=e),bullets.forEach(function(e){return e.y-=e.speed*(t/16.67)}),shapes.forEach(function(e){return e.y+=e.speed*(t/16.67)}),checkCollisions();for(var a=bullets.length-1;0<=a;a--)bullets[a].y+bullets[a].height<0&&bullets.splice(a,1)}function rectHit(e,t){return e.x<t.x+t.size&&e.x+e.width>t.x&&e.y<t.y+t.size&&e.y+e.height>t.y}function checkCollisions(){for(var e=shapes.length-1;0<=e;e--){for(var t=bullets.length-1;0<=t;t--)if(rectHit(bullets[t],shapes[e]))return shapes.splice(e,1),bullets.splice(t,1),void score++;if(shapes[e].y+shapes[e].size>=canvas.height)return void endGame()}}function render(){ctx.fillStyle="#00ff00",ctx.font="16px monospace",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillRect(player.x,player.y,player.width,player.height),bullets.forEach(function(e){return ctx.fillRect(e.x,e.y,e.width,e.height)}),shapes.forEach(function(e){return ctx.fillRect(e.x,e.y,e.size,e.size)}),ctx.fillText("SCORE: ".concat(score),20,30),ctx.fillText("STATE: ".concat(currentState),canvas.width-140,10),currentState===GAME_STATE.PAUSED&&(ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText("PAUSED",canvas.width/2,canvas.height/2)),currentState===GAME_STATE.HOME&&0<score&&(ctx.textAlign="center",ctx.fillText("GAME OVER",canvas.width/2,canvas.height/2-20))}window.addEventListener("keydown",function(e){"KeyP"!==e.code?currentState===GAME_STATE.PLAYING&&("ArrowLeft"===e.code&&(moveLeft=!0),"ArrowRight"===e.code&&(moveRight=!0),"Space"!==e.code||spaceHeld||(shoot(),spaceHeld=!0)):currentState===GAME_STATE.PLAYING?(currentState=GAME_STATE.PAUSED,moveRight=moveLeft=!1):currentState===GAME_STATE.PAUSED&&(currentState=GAME_STATE.PLAYING)}),window.addEventListener("keyup",function(e){"ArrowLeft"===e.code&&(moveLeft=!1),"ArrowRight"===e.code&&(moveRight=!1),"Space"===e.code&&(spaceHeld=!1)});
//# sourceMappingURL=main.min.js.map
