{"version":3,"sources":["main.js"],"names":["CONFIG","PLAYER_SPEED","FIRE_COOLDOWN","BULLET_SPEED","SHAPE_MIN_SPEED","SHAPE_MAX_SPEED","SHAPE_SIZE","SPAWN_BASE","SPAWN_MIN","canvas","document","getElementById","ctx","getContext","resizeCanvas","width","window","innerWidth","height","innerHeight","addEventListener","GAME_STATE","HOME","PLAYING","PAUSED","currentState","homeUI","startBtn","scoreboard","highScore","Number","localStorage","getItem","textContent","onclick","style","display","startGame","lastTime","gameLoop","timestamp","delta","Math","min","clearRect","update","render","requestAnimationFrame","player","x","y","fireCooldown","resetPlayer","moveLeft","moveRight","spaceHeld","bullets","shoot","push","speed","shapes","spawnTimer","spawnShape","random","size","score","length","endGame","setItem","e","code","spawnInterval","max","forEach","b","s","checkCollisions","i","splice","rectHit","a","j","fillStyle","font","textAlign","textBaseline","fillRect","fillText"],"mappings":";;AAAA;AACA,IAAMA,MAAM,GAAG;AACXC,EAAAA,YAAY,EAAE,CADH;AAEXC,EAAAA,aAAa,EAAE,GAFJ;AAGXC,EAAAA,YAAY,EAAE,CAHH;AAIXC,EAAAA,eAAe,EAAE,CAJN;AAKXC,EAAAA,eAAe,EAAE,CALN;AAMXC,EAAAA,UAAU,EAAE,EAND;AAOXC,EAAAA,UAAU,EAAE,GAPD;AAQXC,EAAAA,SAAS,EAAE;AARA,CAAf,C,CAWA;;AACA,IAAMC,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAf;AACA,IAAMC,GAAG,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAZ;;AAEA,SAASC,YAAT,GAAwB;AACpBL,EAAAA,MAAM,CAACM,KAAP,GAAeC,MAAM,CAACC,UAAtB;AACAR,EAAAA,MAAM,CAACS,MAAP,GAAgBF,MAAM,CAACG,WAAvB;AACH;;AACDH,MAAM,CAACI,gBAAP,CAAwB,QAAxB,EAAkCN,YAAlC;AACAA,YAAY,G,CAEZ;;AACA,IAAMO,UAAU,GAAG;AACfC,EAAAA,IAAI,EAAE,MADS;AAEfC,EAAAA,OAAO,EAAE,SAFM;AAGfC,EAAAA,MAAM,EAAE;AAHO,CAAnB;AAMA,IAAIC,YAAY,GAAGJ,UAAU,CAACC,IAA9B,C,CAEA;;AACA,IAAMI,MAAM,GAAGhB,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;AACA,IAAMgB,QAAQ,GAAGjB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAjB;AACA,IAAMiB,UAAU,GAAGlB,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAnB;AAEA,IAAIkB,SAAS,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAD,CAAN,IAA6C,CAA7D;AACAJ,UAAU,CAACK,WAAX,yBAAwCJ,SAAxC;;AAEAF,QAAQ,CAACO,OAAT,GAAmB,YAAM;AACrBT,EAAAA,YAAY,GAAGJ,UAAU,CAACE,OAA1B;AACAG,EAAAA,MAAM,CAACS,KAAP,CAAaC,OAAb,GAAuB,MAAvB;AACAC,EAAAA,SAAS;AACZ,CAJD,C,CAMA;;;AACA,IAAIC,QAAQ,GAAG,CAAf;;AAEA,SAASC,QAAT,CAAkBC,SAAlB,EAA6B;AACzB,MAAMC,KAAK,GAAGC,IAAI,CAACC,GAAL,CAASH,SAAS,GAAGF,QAArB,EAA+B,EAA/B,CAAd;AACAA,EAAAA,QAAQ,GAAGE,SAAX;AAEA5B,EAAAA,GAAG,CAACgC,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBnC,MAAM,CAACM,KAA3B,EAAkCN,MAAM,CAACS,MAAzC;;AAEA,MAAIO,YAAY,KAAKJ,UAAU,CAACE,OAAhC,EAAyC;AACrCsB,IAAAA,MAAM,CAACJ,KAAD,CAAN;AACH;;AAEDK,EAAAA,MAAM;AACNC,EAAAA,qBAAqB,CAACR,QAAD,CAArB;AACH;;AAEDQ,qBAAqB,CAACR,QAAD,CAArB,C,CAEA;;AACA,IAAMS,MAAM,GAAG;AACXjC,EAAAA,KAAK,EAAE,EADI;AAEXG,EAAAA,MAAM,EAAE,EAFG;AAGX+B,EAAAA,CAAC,EAAE,CAHQ;AAIXC,EAAAA,CAAC,EAAE,CAJQ;AAKXC,EAAAA,YAAY,EAAE;AALH,CAAf;;AAQA,SAASC,WAAT,GAAuB;AACnBJ,EAAAA,MAAM,CAACC,CAAP,GAAWxC,MAAM,CAACM,KAAP,GAAe,CAAf,GAAmBiC,MAAM,CAACjC,KAAP,GAAe,CAA7C;AACAiC,EAAAA,MAAM,CAACE,CAAP,GAAWzC,MAAM,CAACS,MAAP,GAAgB8B,MAAM,CAAC9B,MAAvB,GAAgC,EAA3C;AACH;;AAED,IAAImC,QAAQ,GAAG,KAAf;AACA,IAAIC,SAAS,GAAG,KAAhB;AACA,IAAIC,SAAS,GAAG,KAAhB,C,CAEA;;AACA,IAAMC,OAAO,GAAG,EAAhB;;AAEA,SAASC,KAAT,GAAiB;AACb,MAAIT,MAAM,CAACG,YAAP,GAAsB,CAA1B,EAA6B;AAE7BK,EAAAA,OAAO,CAACE,IAAR,CAAa;AACTT,IAAAA,CAAC,EAAED,MAAM,CAACC,CAAP,GAAWD,MAAM,CAACjC,KAAP,GAAe,CAA1B,GAA8B,CADxB;AAETmC,IAAAA,CAAC,EAAEF,MAAM,CAACE,CAFD;AAGTnC,IAAAA,KAAK,EAAE,CAHE;AAITG,IAAAA,MAAM,EAAE,EAJC;AAKTyC,IAAAA,KAAK,EAAE3D,MAAM,CAACG;AALL,GAAb;AAQA6C,EAAAA,MAAM,CAACG,YAAP,GAAsBnD,MAAM,CAACE,aAA7B;AACH,C,CAED;;;AACA,IAAM0D,MAAM,GAAG,EAAf;AACA,IAAIC,UAAU,GAAG,CAAjB;;AAEA,SAASC,UAAT,GAAsB;AAClBF,EAAAA,MAAM,CAACF,IAAP,CAAY;AACRT,IAAAA,CAAC,EAAEP,IAAI,CAACqB,MAAL,MAAiBtD,MAAM,CAACM,KAAP,GAAef,MAAM,CAACM,UAAvC,CADK;AAER4C,IAAAA,CAAC,EAAE,CAAClD,MAAM,CAACM,UAFH;AAGR0D,IAAAA,IAAI,EAAEhE,MAAM,CAACM,UAHL;AAIRqD,IAAAA,KAAK,EACD3D,MAAM,CAACI,eAAP,GACAsC,IAAI,CAACqB,MAAL,MAAiB/D,MAAM,CAACK,eAAP,GAAyBL,MAAM,CAACI,eAAjD;AANI,GAAZ;AAQH,C,CAED;;;AACA,IAAI6D,KAAK,GAAG,CAAZ;;AAEA,SAAS5B,SAAT,GAAqB;AACjB4B,EAAAA,KAAK,GAAG,CAAR;AACAJ,EAAAA,UAAU,GAAG,CAAb;AACAL,EAAAA,OAAO,CAACU,MAAR,GAAiB,CAAjB;AACAN,EAAAA,MAAM,CAACM,MAAP,GAAgB,CAAhB;AACAb,EAAAA,QAAQ,GAAG,KAAX;AACAC,EAAAA,SAAS,GAAG,KAAZ;AACAC,EAAAA,SAAS,GAAG,KAAZ;AACAH,EAAAA,WAAW;AACd;;AAED,SAASe,OAAT,GAAmB;AACf1C,EAAAA,YAAY,GAAGJ,UAAU,CAACC,IAA1B;AACAI,EAAAA,MAAM,CAACS,KAAP,CAAaC,OAAb,GAAuB,MAAvB;;AAEA,MAAI6B,KAAK,GAAGpC,SAAZ,EAAuB;AACnBA,IAAAA,SAAS,GAAGoC,KAAZ;AACAlC,IAAAA,YAAY,CAACqC,OAAb,CAAqB,WAArB,EAAkCvC,SAAlC;AACH;;AAEDD,EAAAA,UAAU,CAACK,WAAX,yBAAwCJ,SAAxC;AACH,C,CAED;;;AACAb,MAAM,CAACI,gBAAP,CAAwB,SAAxB,EAAmC,UAACiD,CAAD,EAAO;AACtC,MAAIA,CAAC,CAACC,IAAF,KAAW,MAAf,EAAuB;AACnB,QAAI7C,YAAY,KAAKJ,UAAU,CAACE,OAAhC,EAAyC;AACrCE,MAAAA,YAAY,GAAGJ,UAAU,CAACG,MAA1B;AACA6B,MAAAA,QAAQ,GAAG,KAAX;AACAC,MAAAA,SAAS,GAAG,KAAZ;AACH,KAJD,MAIO,IAAI7B,YAAY,KAAKJ,UAAU,CAACG,MAAhC,EAAwC;AAC3CC,MAAAA,YAAY,GAAGJ,UAAU,CAACE,OAA1B;AACH;;AACD;AACH;;AAED,MAAIE,YAAY,KAAKJ,UAAU,CAACE,OAAhC,EAAyC;AAEzC,MAAI8C,CAAC,CAACC,IAAF,KAAW,WAAf,EAA4BjB,QAAQ,GAAG,IAAX;AAC5B,MAAIgB,CAAC,CAACC,IAAF,KAAW,YAAf,EAA6BhB,SAAS,GAAG,IAAZ;;AAE7B,MAAIe,CAAC,CAACC,IAAF,KAAW,OAAX,IAAsB,CAACf,SAA3B,EAAsC;AAClCE,IAAAA,KAAK;AACLF,IAAAA,SAAS,GAAG,IAAZ;AACH;AACJ,CArBD;AAuBAvC,MAAM,CAACI,gBAAP,CAAwB,OAAxB,EAAiC,UAACiD,CAAD,EAAO;AACpC,MAAIA,CAAC,CAACC,IAAF,KAAW,WAAf,EAA4BjB,QAAQ,GAAG,KAAX;AAC5B,MAAIgB,CAAC,CAACC,IAAF,KAAW,YAAf,EAA6BhB,SAAS,GAAG,KAAZ;AAC7B,MAAIe,CAAC,CAACC,IAAF,KAAW,OAAf,EAAwBf,SAAS,GAAG,KAAZ;AAC3B,CAJD,E,CAMA;;AACA,SAASV,MAAT,CAAgBJ,KAAhB,EAAuB;AACnBO,EAAAA,MAAM,CAACG,YAAP,IAAuBV,KAAvB;AACA,MAAIO,MAAM,CAACG,YAAP,GAAsB,CAA1B,EAA6BH,MAAM,CAACG,YAAP,GAAsB,CAAtB;AAE7B,MAAIE,QAAJ,EAAcL,MAAM,CAACC,CAAP,IAAYjD,MAAM,CAACC,YAAnB;AACd,MAAIqD,SAAJ,EAAeN,MAAM,CAACC,CAAP,IAAYjD,MAAM,CAACC,YAAnB;AAEf,MAAI+C,MAAM,CAACC,CAAP,GAAW,CAAf,EAAkBD,MAAM,CAACC,CAAP,GAAW,CAAX;;AAClB,MAAID,MAAM,CAACC,CAAP,GAAWD,MAAM,CAACjC,KAAlB,GAA0BN,MAAM,CAACM,KAArC,EAA4C;AACxCiC,IAAAA,MAAM,CAACC,CAAP,GAAWxC,MAAM,CAACM,KAAP,GAAeiC,MAAM,CAACjC,KAAjC;AACH;;AAED8C,EAAAA,UAAU,IAAIpB,KAAd;AACA,MAAM8B,aAAa,GAAG7B,IAAI,CAAC8B,GAAL,CAClBxE,MAAM,CAACQ,SADW,EAElBR,MAAM,CAACO,UAAP,GAAoB0D,KAAK,GAAG,EAFV,CAAtB;;AAKA,MAAIJ,UAAU,IAAIU,aAAlB,EAAiC;AAC7BT,IAAAA,UAAU;AACVD,IAAAA,UAAU,IAAIU,aAAd;AACH;;AAEDf,EAAAA,OAAO,CAACiB,OAAR,CAAgB,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACxB,CAAF,IAAOwB,CAAC,CAACf,KAAF,IAAWlB,KAAK,GAAG,KAAnB,CAAX;AAAA,GAAjB;AACAmB,EAAAA,MAAM,CAACa,OAAP,CAAe,UAAAE,CAAC;AAAA,WAAIA,CAAC,CAACzB,CAAF,IAAOyB,CAAC,CAAChB,KAAF,IAAWlB,KAAK,GAAG,KAAnB,CAAX;AAAA,GAAhB;AAEAmC,EAAAA,eAAe;;AAEf,OAAK,IAAIC,CAAC,GAAGrB,OAAO,CAACU,MAAR,GAAiB,CAA9B,EAAiCW,CAAC,IAAI,CAAtC,EAAyCA,CAAC,EAA1C,EAA8C;AAC1C,QAAIrB,OAAO,CAACqB,CAAD,CAAP,CAAW3B,CAAX,GAAeM,OAAO,CAACqB,CAAD,CAAP,CAAW3D,MAA1B,GAAmC,CAAvC,EAA0C;AACtCsC,MAAAA,OAAO,CAACsB,MAAR,CAAeD,CAAf,EAAkB,CAAlB;AACH;AACJ;AACJ,C,CAED;;;AACA,SAASE,OAAT,CAAiBC,CAAjB,EAAoBN,CAApB,EAAuB;AACnB,SACIM,CAAC,CAAC/B,CAAF,GAAMyB,CAAC,CAACzB,CAAF,GAAMyB,CAAC,CAACV,IAAd,IACAgB,CAAC,CAAC/B,CAAF,GAAM+B,CAAC,CAACjE,KAAR,GAAgB2D,CAAC,CAACzB,CADlB,IAEA+B,CAAC,CAAC9B,CAAF,GAAMwB,CAAC,CAACxB,CAAF,GAAMwB,CAAC,CAACV,IAFd,IAGAgB,CAAC,CAAC9B,CAAF,GAAM8B,CAAC,CAAC9D,MAAR,GAAiBwD,CAAC,CAACxB,CAJvB;AAMH;;AAED,SAAS0B,eAAT,GAA2B;AACvB,OAAK,IAAIC,CAAC,GAAGjB,MAAM,CAACM,MAAP,GAAgB,CAA7B,EAAgCW,CAAC,IAAI,CAArC,EAAwCA,CAAC,EAAzC,EAA6C;AACzC,SAAK,IAAII,CAAC,GAAGzB,OAAO,CAACU,MAAR,GAAiB,CAA9B,EAAiCe,CAAC,IAAI,CAAtC,EAAyCA,CAAC,EAA1C,EAA8C;AAC1C,UAAIF,OAAO,CAACvB,OAAO,CAACyB,CAAD,CAAR,EAAarB,MAAM,CAACiB,CAAD,CAAnB,CAAX,EAAoC;AAChCjB,QAAAA,MAAM,CAACkB,MAAP,CAAcD,CAAd,EAAiB,CAAjB;AACArB,QAAAA,OAAO,CAACsB,MAAR,CAAeG,CAAf,EAAkB,CAAlB;AACAhB,QAAAA,KAAK;AACL;AACH;AACJ;;AAED,QAAIL,MAAM,CAACiB,CAAD,CAAN,CAAU3B,CAAV,GAAcU,MAAM,CAACiB,CAAD,CAAN,CAAUb,IAAxB,IAAgCvD,MAAM,CAACS,MAA3C,EAAmD;AAC/CiD,MAAAA,OAAO;AACP;AACH;AACJ;AACJ,C,CAED;;;AACA,SAASrB,MAAT,GAAkB;AACdlC,EAAAA,GAAG,CAACsE,SAAJ,GAAgB,SAAhB;AACAtE,EAAAA,GAAG,CAACuE,IAAJ,GAAW,gBAAX;AACAvE,EAAAA,GAAG,CAACwE,SAAJ,GAAgB,MAAhB;AACAxE,EAAAA,GAAG,CAACyE,YAAJ,GAAmB,KAAnB;AAEAzE,EAAAA,GAAG,CAAC0E,QAAJ,CAAatC,MAAM,CAACC,CAApB,EAAuBD,MAAM,CAACE,CAA9B,EAAiCF,MAAM,CAACjC,KAAxC,EAA+CiC,MAAM,CAAC9B,MAAtD;AAEAsC,EAAAA,OAAO,CAACiB,OAAR,CAAgB,UAAAC,CAAC;AAAA,WACb9D,GAAG,CAAC0E,QAAJ,CAAaZ,CAAC,CAACzB,CAAf,EAAkByB,CAAC,CAACxB,CAApB,EAAuBwB,CAAC,CAAC3D,KAAzB,EAAgC2D,CAAC,CAACxD,MAAlC,CADa;AAAA,GAAjB;AAIA0C,EAAAA,MAAM,CAACa,OAAP,CAAe,UAAAE,CAAC;AAAA,WACZ/D,GAAG,CAAC0E,QAAJ,CAAaX,CAAC,CAAC1B,CAAf,EAAkB0B,CAAC,CAACzB,CAApB,EAAuByB,CAAC,CAACX,IAAzB,EAA+BW,CAAC,CAACX,IAAjC,CADY;AAAA,GAAhB;AAIApD,EAAAA,GAAG,CAAC2E,QAAJ,kBAAuBtB,KAAvB,GAAgC,EAAhC,EAAoC,EAApC;AACArD,EAAAA,GAAG,CAAC2E,QAAJ,kBAAuB9D,YAAvB,GAAuChB,MAAM,CAACM,KAAP,GAAe,GAAtD,EAA2D,EAA3D;;AAEA,MAAIU,YAAY,KAAKJ,UAAU,CAACG,MAAhC,EAAwC;AACpCZ,IAAAA,GAAG,CAACwE,SAAJ,GAAgB,QAAhB;AACAxE,IAAAA,GAAG,CAACyE,YAAJ,GAAmB,QAAnB;AACAzE,IAAAA,GAAG,CAAC2E,QAAJ,CAAa,QAAb,EAAuB9E,MAAM,CAACM,KAAP,GAAe,CAAtC,EAAyCN,MAAM,CAACS,MAAP,GAAgB,CAAzD;AACH;;AAED,MAAIO,YAAY,KAAKJ,UAAU,CAACC,IAA5B,IAAoC2C,KAAK,GAAG,CAAhD,EAAmD;AAC/CrD,IAAAA,GAAG,CAACwE,SAAJ,GAAgB,QAAhB;AACAxE,IAAAA,GAAG,CAAC2E,QAAJ,CACI,WADJ,EAEI9E,MAAM,CAACM,KAAP,GAAe,CAFnB,EAGIN,MAAM,CAACS,MAAP,GAAgB,CAAhB,GAAoB,EAHxB;AAKH;AACJ","sourcesContent":["// ================= CONFIG =================\r\nconst CONFIG = {\r\n    PLAYER_SPEED: 6,\r\n    FIRE_COOLDOWN: 200,\r\n    BULLET_SPEED: 8,\r\n    SHAPE_MIN_SPEED: 2,\r\n    SHAPE_MAX_SPEED: 4,\r\n    SHAPE_SIZE: 30,\r\n    SPAWN_BASE: 800,\r\n    SPAWN_MIN: 300\r\n};\r\n\r\n// ================= CANVAS =================\r\nconst canvas = document.getElementById(\"gameCanvas\");\r\nconst ctx = canvas.getContext(\"2d\");\r\n\r\nfunction resizeCanvas() {\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n}\r\nwindow.addEventListener(\"resize\", resizeCanvas);\r\nresizeCanvas();\r\n\r\n// ================= GAME STATE =================\r\nconst GAME_STATE = {\r\n    HOME: \"HOME\",\r\n    PLAYING: \"PLAYING\",\r\n    PAUSED: \"PAUSED\"\r\n};\r\n\r\nlet currentState = GAME_STATE.HOME;\r\n\r\n// ================= UI =================\r\nconst homeUI = document.getElementById(\"homeUI\");\r\nconst startBtn = document.getElementById(\"startBtn\");\r\nconst scoreboard = document.getElementById(\"scoreboard\");\r\n\r\nlet highScore = Number(localStorage.getItem(\"highScore\")) || 0;\r\nscoreboard.textContent = `HIGH SCORE: ${highScore}`;\r\n\r\nstartBtn.onclick = () => {\r\n    currentState = GAME_STATE.PLAYING;\r\n    homeUI.style.display = \"none\";\r\n    startGame();\r\n};\r\n\r\n// ================= GAME LOOP =================\r\nlet lastTime = 0;\r\n\r\nfunction gameLoop(timestamp) {\r\n    const delta = Math.min(timestamp - lastTime, 50);\r\n    lastTime = timestamp;\r\n\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    if (currentState === GAME_STATE.PLAYING) {\r\n        update(delta);\r\n    }\r\n\r\n    render();\r\n    requestAnimationFrame(gameLoop);\r\n}\r\n\r\nrequestAnimationFrame(gameLoop);\r\n\r\n// ================= PLAYER =================\r\nconst player = {\r\n    width: 40,\r\n    height: 20,\r\n    x: 0,\r\n    y: 0,\r\n    fireCooldown: 0\r\n};\r\n\r\nfunction resetPlayer() {\r\n    player.x = canvas.width / 2 - player.width / 2;\r\n    player.y = canvas.height - player.height - 20;\r\n}\r\n\r\nlet moveLeft = false;\r\nlet moveRight = false;\r\nlet spaceHeld = false;\r\n\r\n// ================= BULLETS =================\r\nconst bullets = [];\r\n\r\nfunction shoot() {\r\n    if (player.fireCooldown > 0) return;\r\n\r\n    bullets.push({\r\n        x: player.x + player.width / 2 - 2,\r\n        y: player.y,\r\n        width: 4,\r\n        height: 10,\r\n        speed: CONFIG.BULLET_SPEED\r\n    });\r\n\r\n    player.fireCooldown = CONFIG.FIRE_COOLDOWN;\r\n}\r\n\r\n// ================= ENEMIES =================\r\nconst shapes = [];\r\nlet spawnTimer = 0;\r\n\r\nfunction spawnShape() {\r\n    shapes.push({\r\n        x: Math.random() * (canvas.width - CONFIG.SHAPE_SIZE),\r\n        y: -CONFIG.SHAPE_SIZE,\r\n        size: CONFIG.SHAPE_SIZE,\r\n        speed:\r\n            CONFIG.SHAPE_MIN_SPEED +\r\n            Math.random() * (CONFIG.SHAPE_MAX_SPEED - CONFIG.SHAPE_MIN_SPEED)\r\n    });\r\n}\r\n\r\n// ================= GAME CONTROL =================\r\nlet score = 0;\r\n\r\nfunction startGame() {\r\n    score = 0;\r\n    spawnTimer = 0;\r\n    bullets.length = 0;\r\n    shapes.length = 0;\r\n    moveLeft = false;\r\n    moveRight = false;\r\n    spaceHeld = false;\r\n    resetPlayer();\r\n}\r\n\r\nfunction endGame() {\r\n    currentState = GAME_STATE.HOME;\r\n    homeUI.style.display = \"flex\";\r\n\r\n    if (score > highScore) {\r\n        highScore = score;\r\n        localStorage.setItem(\"highScore\", highScore);\r\n    }\r\n\r\n    scoreboard.textContent = `HIGH SCORE: ${highScore}`;\r\n}\r\n\r\n// ================= INPUT =================\r\nwindow.addEventListener(\"keydown\", (e) => {\r\n    if (e.code === \"KeyP\") {\r\n        if (currentState === GAME_STATE.PLAYING) {\r\n            currentState = GAME_STATE.PAUSED;\r\n            moveLeft = false;\r\n            moveRight = false;\r\n        } else if (currentState === GAME_STATE.PAUSED) {\r\n            currentState = GAME_STATE.PLAYING;\r\n        }\r\n        return;\r\n    }\r\n\r\n    if (currentState !== GAME_STATE.PLAYING) return;\r\n\r\n    if (e.code === \"ArrowLeft\") moveLeft = true;\r\n    if (e.code === \"ArrowRight\") moveRight = true;\r\n\r\n    if (e.code === \"Space\" && !spaceHeld) {\r\n        shoot();\r\n        spaceHeld = true;\r\n    }\r\n});\r\n\r\nwindow.addEventListener(\"keyup\", (e) => {\r\n    if (e.code === \"ArrowLeft\") moveLeft = false;\r\n    if (e.code === \"ArrowRight\") moveRight = false;\r\n    if (e.code === \"Space\") spaceHeld = false;\r\n});\r\n\r\n// ================= UPDATE =================\r\nfunction update(delta) {\r\n    player.fireCooldown -= delta;\r\n    if (player.fireCooldown < 0) player.fireCooldown = 0;\r\n\r\n    if (moveLeft) player.x -= CONFIG.PLAYER_SPEED;\r\n    if (moveRight) player.x += CONFIG.PLAYER_SPEED;\r\n\r\n    if (player.x < 0) player.x = 0;\r\n    if (player.x + player.width > canvas.width) {\r\n        player.x = canvas.width - player.width;\r\n    }\r\n\r\n    spawnTimer += delta;\r\n    const spawnInterval = Math.max(\r\n        CONFIG.SPAWN_MIN,\r\n        CONFIG.SPAWN_BASE - score * 10\r\n    );\r\n\r\n    if (spawnTimer >= spawnInterval) {\r\n        spawnShape();\r\n        spawnTimer -= spawnInterval;\r\n    }\r\n\r\n    bullets.forEach(b => b.y -= b.speed * (delta / 16.67));\r\n    shapes.forEach(s => s.y += s.speed * (delta / 16.67));\r\n\r\n    checkCollisions();\r\n\r\n    for (let i = bullets.length - 1; i >= 0; i--) {\r\n        if (bullets[i].y + bullets[i].height < 0) {\r\n            bullets.splice(i, 1);\r\n        }\r\n    }\r\n}\r\n\r\n// ================= COLLISION =================\r\nfunction rectHit(a, b) {\r\n    return (\r\n        a.x < b.x + b.size &&\r\n        a.x + a.width > b.x &&\r\n        a.y < b.y + b.size &&\r\n        a.y + a.height > b.y\r\n    );\r\n}\r\n\r\nfunction checkCollisions() {\r\n    for (let i = shapes.length - 1; i >= 0; i--) {\r\n        for (let j = bullets.length - 1; j >= 0; j--) {\r\n            if (rectHit(bullets[j], shapes[i])) {\r\n                shapes.splice(i, 1);\r\n                bullets.splice(j, 1);\r\n                score++;\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (shapes[i].y + shapes[i].size >= canvas.height) {\r\n            endGame();\r\n            return;\r\n        }\r\n    }\r\n}\r\n\r\n// ================= RENDER =================\r\nfunction render() {\r\n    ctx.fillStyle = \"#00ff00\";\r\n    ctx.font = \"16px monospace\";\r\n    ctx.textAlign = \"left\";\r\n    ctx.textBaseline = \"top\";\r\n\r\n    ctx.fillRect(player.x, player.y, player.width, player.height);\r\n\r\n    bullets.forEach(b =>\r\n        ctx.fillRect(b.x, b.y, b.width, b.height)\r\n    );\r\n\r\n    shapes.forEach(s =>\r\n        ctx.fillRect(s.x, s.y, s.size, s.size)\r\n    );\r\n\r\n    ctx.fillText(`SCORE: ${score}`, 20, 30);\r\n    ctx.fillText(`STATE: ${currentState}`, canvas.width - 140, 10);\r\n\r\n    if (currentState === GAME_STATE.PAUSED) {\r\n        ctx.textAlign = \"center\";\r\n        ctx.textBaseline = \"middle\";\r\n        ctx.fillText(\"PAUSED\", canvas.width / 2, canvas.height / 2);\r\n    }\r\n\r\n    if (currentState === GAME_STATE.HOME && score > 0) {\r\n        ctx.textAlign = \"center\";\r\n        ctx.fillText(\r\n            \"GAME OVER\",\r\n            canvas.width / 2,\r\n            canvas.height / 2 - 20\r\n        );\r\n    }\r\n}\r\n"],"file":"main.dev.js"}